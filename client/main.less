/*
To the extent possible under law, the author(s) have dedicated all copyright
and related and neighboring rights to this software to the public domain
worldwide. This software is distributed without any warranty. You should have
received a copy of the CC0 Public Domain Dedication along with this software.
If not, see <http://creativecommons.org/publicdomain/zero/1.0/>.
*/

// Constants

@containerWidth: 68.75rem;
@containerHeight: 45.75rem;
@mainWidth: 40rem;
@mainHeight: @containerHeight;
@navigationWidth: 25rem;
@mobileNavigationWidth: 30rem;
@navigationHeight: @containerHeight;
@defaultFontSize: 1.625rem;
@smallFontSize: 1.3rem;
@largeFontSize: 2rem;
@largeFontSize: 2rem;
@newGamePromoWidth: 25rem;
@newGamePromoHeight: 25rem;
@gameDescriptionLeftMargin: 1.5rem;
@menuButtonHeight: 5.625rem;
@promoButtonContainerTopMargin: 6.25rem;
@menuButtonTextLeftMargin: 0.625rem;
@mobileHeaderWidth: 6rem;
@mobileHeaderHeight: 3.4rem;


////////// DEBUG //////////

// html {
//   opacity: 0.1 !important;
// }

// .normalOpacity {
//   opacity: 1 !important;
// }

////////// END DEBUG //////////

// Mixins

.centeredBlock (@width, @height) {
  height: @height;
  width: @width;
  margin-top: -(@height/2);
  margin-left: -(@width/2);
  top: 50%;
  left: 50%;
}

.transform(...) {
  -webkit-transform: @arguments;
  -moz-transform: @arguments;
  -o-transform: @arguments;
  -ms-transform: @arguments;
  transform: @arguments;
}

.transition(@prop, @duration:0.2s, @ease:ease-out) {
  -webkit-transition: @prop @duration @ease;
  -moz-transition: @prop @duration @ease;
  -o-transition: @prop @duration @ease;
  transition: @prop @duration @ease;
}

.transition-property(@p1, @p2) {
  -webkit-transition-property: @p1, @p2;
  -moz-transition-property: @p1, @p2;
  -o-transition-property: @p1, @p2;
  transition-property: @p1, @p2;
}

.transition-duration(@duration: 0.2s) {
  -webkit-transition-duration: @duration;
  -moz-transition-duration: @duration;
  -o-transition-duration: @duration;
  transition-duration: @duration;
}

.box-shadow(@arguments) {
  -webkit-box-shadow: @arguments;
  -moz-box-shadow: @arguments;
  box-shadow: @arguments;
}

.nDefaultFont(@fontSize: @defaultFontSize) {
  font-size: @fontSize;
  font-family: 'Helvetica Neue', Helvetica, 'lucida grande', arial, sans-serif;
  line-height: 1.1;
}

// Overrides

.toast-message {
  .nDefaultFont();
}

.popover-content {
  .nDefaultFont();
}

// This helps bootstrap tooltips show up on top of scrollbars
.tooltip {
  position: fixed;
}

// Common Styles

@charset "UTF-8";
@-ms-viewport {
  width: device-width;
}

@viewport {
  width: device-width;
}

html {
  height: 100%;
  width: 100%;
}

body {
  height: 100%;
  position: absolute;
  width: 100%;
  background-color: white;
}

body.modal-open {
  margin: 0 !important;
  overflow: inherit !important;
}

.btn {
  .nDefaultFont();
}

.modal-body {
  .nDefaultFont();
}

.nWrapper {
  height: 100%;
  overflow: hidden;
  position: absolute;
  width: 100%;
  .nDefaultFont();
}

.nNavigation {
  background-color: #f5f5f5;
  overflow: hidden;
  position: absolute;
  width: 100%;
  z-index: 5;
}

.nNavigation:hover {
  overflow-y: auto;
}

.nMobileHeader {
  display: none;
}

.nMain {
  background: #fff;
}

// Initially hide all content, the individual screens are configured to show it selectively.
.nMain > div {
  display: none;
}

.nGameCanvas {
  .centeredBlock(37.5rem, 37.5rem);
  border: 1px solid #aaa;
  left: 50%;
  position: absolute;
  top: 50%;
}

.nCloseLink, .nCloseLink:hover {
  text-decoration: none;
  color: #000;
  font-size: @largeFontSize;
  float: right;
}

.nMenuToggleButton {
  cursor: pointer;
  font-size: 2.5rem;
  left: 0.65rem;
  position: absolute;
  top: 0.2rem;
}

.nGame {
  .centeredBlock(37.5rem, 37.5rem);
  border: solid 1px #aaa;
  display: block;
  left: 50%;
  position: absolute;
  top: 50%;
}

.nLogo {
  display: block;
  margin: 0.625rem auto 0 auto;
  width: 18.75rem;
  height: 4.6875rem;
}

.nNotification {
  position: absolute;
  text-align: center;
  bottom: 0.5rem;
}

.nNewGamePromo {
  .centeredBlock(@newGamePromoWidth, @newGamePromoHeight);
  position: absolute;
}

.nLoading {
  .centeredBlock(@newGamePromoWidth, @newGamePromoHeight);
  position: absolute;
  text-align: center;
}

.nPromoButtonContainer {
  text-align: center;
  margin-top: @promoButtonContainerTopMargin;
}

.nMenuButton {
  background-image: none;
  width: @navigationWidth;
  height: @menuButtonHeight;
  margin-top: -1px; // Overlap borders when multiple buttons are stacked
  text-align: left;
  padding-left: 5rem;
}

.nGameMessage {
  // Bootstrap seems to be adding a scroll-well when not needed on small
  // screens.
  overflow-y: hidden;
}

.nGameMessageHeader {
  font-size: @largeFontSize;
}

.nSmallInviteButton {
  background-image: none;
}

.nSmallFacebookInviteButton {
  display: block;
}

.nFacebookInviteCancelLink {
  display: block;
  font-size: @smallFontSize;
  float: right;
  margin-top: 0.5rem;
  margin-right: 0.1rem;
}

.nFacebookInviteButtons {
  float: right;
}

.nMenuButtonIcon {
  position: absolute;
  left: 2rem;
  width: 2.5rem;
  height: 2.5rem;
  text-align: center;
}

.nMenuButtonText {
  margin-left: @menuButtonTextLeftMargin;
}

.nGameDescription {
  // I always find that left-aligned text blocks need to be nudged to the right
  // a bit to make them not look off-center.
  margin-left: @gameDescriptionLeftMargin;
}

.nNewGameButton {
  text-align: center;
  padding-left: 0;
}

.nNavNewGameButton {
  border: 0;
  box-shadow: none;
  margin-bottom: 1rem;
}

.nNewGameMenu {
  .centeredBlock(@navigationWidth, @menuButtonHeight * 6);
  position: absolute;
  margin-top: -18.5rem; // Perfect vertical centering looks strange here.
}

.nFacebookInviteMenu {
  position: absolute;
  .centeredBlock(35rem, 35rem);
}

.nNewGameMenuHeader {
  height: @menuButtonHeight;
  width: @navigationWidth;
  line-height: @menuButtonHeight;
  font-size: @largeFontSize;
  font-weight: bold;
}

.nMoveControlsContainer {
  position: absolute;
  right: 1rem;
  z-index: 4;
}

.nSubmitIcon {
  margin-right: 0.5rem;
}

.nMoveControlButton {
  font-size: @smallFontSize;
  height: 3rem;
}

.nFacebookFriendSelect {
  width: 24rem;
}

.select2-results {
  max-height: 25rem;
}

.select2-search-choice {
  // Man, why would you hardcode a value for this select2.js
  line-height: inherit !important;
}

.nFacebookInviteMenuControls {
  width: 22rem;
  margin: 1rem auto 0 auto;
}

.nFacebookFriendName {
  margin-left: 0.5rem;
}

.nNavItem {
  padding: 0.5rem 0 0.5rem 0.5rem;
  margin: 0.5rem 0 0.5rem 0;
  cursor: pointer;
  border-style: solid;
  border-width: 0 0.3125rem 0 0.3125rem;
  border-color: #f5f5f5;
  .transition(background);
}

.nNavNewGameDescription {
  line-height: 3.125rem;
}

.nNavItem a {
  .transition(color);
}

.nNavBody {
  font-size: @smallFontSize;
}

.nNavBody:hover .nCurrentNavSelection {
  background: #f5f5f5;
}

.nNavBody:hover .nCurrentNavSelection:hover {
  background: #ffffff;
}

.nGameListDescription:hover a {
  color: #005580;
  text-decoration: underline;
}

.nNavItem:hover {
  background: #ffffff;
}

.nCurrentNavSelection {
  background: #ffffff;
}

.nGameListingBody {
  display: inline-block;
}

.nGameListProfilePicture {
  vertical-align: top;
  width: 3.125rem;
  height: 3.125rem;
}

.nGameListIcon {
  display: inline-block;
  width: 3.125rem;
  text-align: center;
  vertical-align: top;
}

.nCloseGameButton {
  float: right;
  height: 3.125rem;
  width: 2rem;
  padding-left: 0.375rem;
  color: #ccc;
}

nav .nCloseGameButton {
  opacity: 0;
}

.nCurrentNavSelection .nCloseGameButton {
  opacity: 1;
}

.nNavBody:hover .nCloseGameButton {
  opacity: 0;
}

.nNavItem:hover .nCloseGameButton {
  opacity: 1;
}

.nGameListDescription {
  display: inline-block;
  margin-left: 0.5rem;
  width: 16rem;
}

.nGameStateSummary {
  color: #666;
  font-style: italic
}

.nGameListNewGameIcon {
  vertical-align: baseline;
}

.nNavigationSectionHeader {
  padding: 0 1rem 0 1rem;
  margin: 0 0.5rem 0.5rem 0.5rem;
  border-width: 0 0 1px 0;
  border-style: solid;
  border-color: #ccc;
}

.nUrlPopover {
  position: absolute;
  top: 0;
  left: 0;
  width: @mainWidth;
}

// Mobile-only styles

.nMobile {
  .nContainer, .nMain {
    height: 100%;
    width: 100%;
  }

  .nNavigation {
    position: absolute;
    top: 0;
    height: 100%;
    width: @mobileNavigationWidth;
    background: #f5f5f5;
    .transition(box-shadow);
    left: 0;
    .transform(translate3d(-100%, 0, 0));
    overflow-y: scroll;
  }

  .nNavOpen {
    .nNavigation {
      .box-shadow(1.5rem 0 1.5rem 0 rgba(0, 0, 0, 0.25));
    }
  }

  .nNavItem {
    border: 0;
  }

  .nNavBody {
    font-size: @defaultFontSize;
  }

  .nCurrentNavSelection {
  }

  .nContainer {
    left: @mobileNavigationWidth;
  }

  .nMain {
    position: absolute;
    top: 0;
    left: 0;
  }

  .nMoveControlsContainer {
    top: 0.125rem;
  }

  .nMobileHeader {
    display: block;
    height: @mobileHeaderHeight;
    z-index: 2;
    color: #000;
    background: #f5f5f5;
    position: absolute;
    left: 0;
    right: 0;
  }

  .nNavigation {
  }

  .nContainer {
    left: 0 !important;
    .transform(translate3d(0, 0, 0));
    .transition(-webkit-transform);
  }

  .nNavOpen .nContainer {
    .transform(translate3d(@mobileNavigationWidth, 0, 0), scale3d(1, 1, 1));
  }

  .nGameListDescription {
    width: 20rem;
  }

}

.nPortraitMode {
  .nNotification {
    width: 100%;
    margin-bottom: 0.4rem;
    bottom: 0;
  }
}

.nLandscapeMode {
  .nMobileHeader {
    height: 100%;
    width: @mobileHeaderWidth;
  }

  .nMenuToggleButton {
    font-size: 4rem;
    top: 0.5rem;
    left: 1.25rem;
  }

  .nNotification {
    right: 0;
  }

  .nNotification {
    height: 100%;
    width: 10rem;
    margin-top: 2rem;
    margin-right: 2rem;
    bottom: inherit;
  }

  .nMoveControlsContainer {
    top: 7rem;
    right: inherit;
    width: @mobileHeaderWidth;

    .nSubmitButonLabel {
      display: none;
    }

    .nSubmitIcon {
      margin-right: 0;
    }

    .nMoveControlButton {
      width: @mobileHeaderWidth - 0.5rem;
      height: @mobileHeaderWidth - 0.5rem;
      margin-left: 0.25rem;
      margin-bottom: 1rem;
      font-size: @defaultFontSize;
    }
  }
}


.nDesktopMode {
  .nContainer {
    .centeredBlock(@containerWidth, @containerHeight);
    position: absolute;
  }

  .nMain {
    width: @mainWidth;
    height: @mainHeight;
    position: absolute;
    top: 0;
    right: 0;
   }

  .nNavigation {
    width: @navigationWidth;
    height: @navigationHeight;
  }
  .nNotification {
    width: 100%;
  }
}